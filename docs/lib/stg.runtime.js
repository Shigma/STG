!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stg=e():t.stg=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16)}([function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(i(17));e.random=r;const o=n(i(12));e.memorize=o.default;const a=n(i(18));e.math=a.default},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(0),r=i(2),o=s(i(3)),a=s(i(4));e.default=class extends a.default{constructor(t={}){super(),this._point={x:0,y:0,face:0},this.show=!1!==t.show,this._displayHook=t.display,this._initHooks("_mountedHook",t.mounted),this._initHooks("_mutateHook",t.mutate),Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e)}get x(){return this._point.x}get y(){return this._point.y}get face(){return this._point.face}set x(t){this._point.x=t,this._coordinate=null}set y(t){this._point.y=t,this._coordinate=null}set face(t){this._point.face=t,this._coordinate=null}_initHooks(t,e){Array.isArray(e)?this[t]=e:this[t]=e?[e]:[]}_mounted(){this._mountedHook.forEach(t=>t.call(this)),this._mutateHook.forEach(t=>this.setTask(t))}render(){this._displayHook&&this.$context&&!1!==this.show&&this._displayHook.call(this)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new o.default(this.x,this.y,this.face),this._coordinate.$birth=this.$tick),this._coordinate}movePolar(t=this.rho,e=this.theta){this.x+=t*n.math.cos(r.angleUnit*e),this.y+=t*n.math.sin(r.angleUnit*e)}emitBullets(...t){this.$parent.$refs.src=this,this.$parent.emitBullets(...t),delete this.$parent.$refs.src}fillCircle(t=this.color,e=this.radius){const{x:i,y:s}=this.$coord;this.$context.beginPath(),this.$context.arc(i,s,e,0,n.math.twoPI),this.$context.closePath(),this.$context.fillStyle=t.output?t.output():t,this.$context.fill()}fillEllipse(t=this.color,e=this.innerColor,i=this.radiusX,s=this.radiusY,o=this.face){const{x:a,y:l}=this.$coord;this.$context.beginPath(),this.$context.strokeStyle=t,this.$context.lineWidth=2,this.$context.ellipse(a,l,i,s,o*r.angleUnit,0,n.math.twoPI),this.$context.closePath(),this.$context.stroke(),this.$context.fillStyle=e.output?e.output():e,this.$context.fill()}getGradient(t,e,i=this.color,s=this.radius){const{x:n,y:r}=this.$coord,o=this.$context.createRadialGradient(n,r,e,n,r,s);return o.addColorStop(0,t.output?t.output():t),o.addColorStop(1,i.output?i.output():i),o}bezierCurve(...t){if(t.length%6==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=6){const i=this.$coord.resolve(t[e],t[e+1]),s=this.$coord.resolve(t[e+2],t[e+3]),n=this.$coord.resolve(t[e+4],t[e+5]);this.$context.bezierCurveTo(i.x,i.y,s.x,s.y,n.x,n.y)}}quadraticCurve(...t){if(t.length%4==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=4){const i=this.$coord.resolve(t[e],t[e+1]),s=this.$coord.resolve(t[e+2],t[e+3]);this.$context.quadraticCurveTo(i.x,i.y,s.x,s.y)}}toJSON(){const t={};for(const e in this)("string"==typeof e&&"$"!==e[0]&&"_"!==e[0]||"$tick"===e)&&(t[e]=this[e]);return t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.angleUnit=Math.PI},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0),n=i(2);class r{constructor(t,e,i){this.x=t,this.y=e,this.face=i}get face(){return this._face}set face(t){this._face=t||0,this._cos=s.math.cos(n.angleUnit*t||0),this._sin=s.math.sin(n.angleUnit*t||0)}get rho(){return this._rho?this._rho:this._rho=s.math.sqrt(this.x**2+this.y**2)}get theta(){return this._thetaRadian/n.angleUnit}get thetaRadian(){return"number"==typeof this._thetaRadian?this._thetaRadian:this._thetaRadian=s.math.atan2(this.y,this.x)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}resolve(...t){let e,i,s;return"object"==typeof t[0]?(e=t[0].x,i=t[0].y,s=t[0].face):[e,i,s=0]=t,new r(this.x+e*this._cos-i*this._sin,this.y+e*this._sin+i*this._cos,this.face+s)}locate(...t){let e,i,s;"object"==typeof t[0]?(e=t[0].x,i=t[0].y,s=t[0].face):[e,i,s=0]=t;const n=e-this.x,o=i-this.y;return new r(n*this._cos+o*this._sin,o*this._cos-n*this._sin,s-this.face)}}e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.$tick=0,Object.defineProperty(this,"__updater__",{value:{tasks:[],currentTask:null,tasksToRemove:new Set,taskIndex:0}})}initialize(t,e){return this.$context=t,this.$parent=e,this._mounted&&this._mounted(),this}update(){this.$tick+=1;const t=this.__updater__;t.tasks=t.tasks.filter(e=>!t.tasksToRemove.has(e.id));const e=t.tasks;if(t.tasksToRemove.clear(),e.forEach(e=>{t.currentTask=e.id,e.callback.call(this,this.$tick),e.preserve||t.tasksToRemove.add(e.id)}),t.tasks.length>s.scheduleLimit)throw new Error(`The amount of scheduled tasks (${t.tasks.length}) is beyond the limit!`)}setTask(t,e=1/0,i=!0){const s=++this.__updater__.taskIndex;return this.__updater__.tasks.splice(e,0,{callback:t,preserve:i,id:s}),s}setTimeout(t,e){return t+=this.$tick,this.setTask(()=>{this.$tick<=t||(e.call(this,this.$tick),this.removeTask())},0)}setInterval(t,...e){if(t<=0)throw new Error(`The interval ${t} should be positive.`);const i=e.length>1?e[0]:1/0,s=e.length>2?e[1]:0,n=e[e.length-1],r=this.$tick+s;return this.setTask(e=>{e-=r;const s=Math.floor(e/t),o=s*t-e;if(s>0&&o>=0&&o<t&&(n.call(this,this.$tick),s>=i))return this.removeTask()},0)}removeTask(t=this.__updater__.currentTask){t&&this.__updater__.tasksToRemove.add(t)}}s.scheduleLimit=256,e.default=s},function(t,e,i){"use strict";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=n(i(6));e.Barrage=o.default;const a=n(i(7));e.Bullet=a.default;const l=n(i(3));e.Coordinate=l.default;const u=n(i(13));e.Field=u.default;const c=n(i(9));e.Looping=c.default;const h=n(i(10));e.Player=h.default;const f=n(i(1));e.CanvasPoint=f.default;const d=n(i(8));e.Templater=d.default;const p=n(i(4));e.Updater=p.default;const _=r(i(2));e.config=_,s(i(20)),s(i(6)),s(i(7)),s(i(3)),s(i(13)),s(i(9)),s(i(10)),s(i(1)),s(i(8)),s(i(4))},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(7)),r=s(i(1)),o=s(i(4));class a extends o.default{constructor(t={}){super(),this._pointCounter=0,this.$refs={},this.$bullets=[],this._mutateHook=t.mutate,this._mountedHook=t.mounted,this._references=t.reference||{},Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e)}_mounted(){this.$refs={},this._mountedHook&&this._mountedHook(),this._mutateHook&&this.setTask(this._mutateHook);for(const t of Object.keys(this._references))this.setRefPoint(t,this._references[t]);this.setTask(()=>{for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.update()}if(this.$bullets.forEach(t=>t.update()),this.$bullets.length>a.maxBulletCount)throw new Error(`The amount of bullets ${this.$bullets.length} is beyond the limit!`)})}render(){for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.render()}this.$bullets.forEach(t=>t.render())}setRefPoint(...t){const e=t[t.length-1],i=t.length>1?t[0]:++this._pointCounter;return this.$refs[i]=new r.default(e).initialize(this.$context,this),i}removeRefPoint(t){return delete this.$refs[t]}emitBullets(...t){const e=t.length>2?t[0]:0,i=t.length>1?t.length>2?t[1]:t[0]:1,s=t.length>3?t[2]:1,r=t[t.length-1];for(let t=e;t<i;t+=s){const e="function"==typeof r?r.call(this,t):r,i=new n.default(e);i.$id=++this._pointCounter;for(const t in this.$refs)i.$refs[t]=this.$refs[t].$coord;i.initialize(this.$context,this);const s=this.$bullets.findIndex(({layer:t})=>t>i.layer);s<0?this.$bullets.push(i):this.$bullets.splice(s,0,i)}}}a.maxBulletCount=4096,e.default=a},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(0),r=i(2),o=s(i(8)),a=s(i(3)),l=s(i(1));class u extends l.default{constructor(t={}){const e=u.templates.resolve(t);void 0===e.judgeType?e.judgeType="ortho":"none"===e.judgeType&&(e.judgeType=null),void 0===e.fieldType?e.fieldType="viewport":"infinite"===e.fieldType&&(e.fieldType=null),e.extends=[e.fieldType,e.judgeType],super(u.templates.resolve(e)),this.$refs={},this.layer=void 0===e.layer?0:e.layer;const i=void 0===e.origin?"origin":e.origin;this._mountedHook.unshift(()=>{this.$origin="string"==typeof i?this.$refs[i]||{x:0,y:0,face:0}:i})}static install(...t){this.templates.install(...t)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new a.default(this.x+this.$origin.x,this.y+this.$origin.y,this.face+this.$origin.face),this._coordinate.$birth=this.$tick),this._coordinate}polarLocate(t=this.rho,e=this.theta){e+=this.$origin.face,this.x=t*n.math.cos(r.angleUnit*e),this.y=t*n.math.sin(r.angleUnit*e)}hitPlayer(){this.$parent.$refs.player.lifeCount-=1,this.destroy()}destroy(){const t=this.$id;this.$parent.setTimeout(0,function(){const e=this.$bullets.findIndex(e=>e.$id===t);e>=0&&this.$bullets.splice(e,1)})}}u.templates=new o.default({hookProperties:["mutate","mounted"]}),e.default=u},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(19));e.default=class{constructor(t={}){this.templates={},this.options={},Object.assign(this.options,t)}install(...t){"string"==typeof t[0]?this.templates[t[0]]=t[1]:"object"==typeof t[0]&&Object.assign(this.templates,t[0])}resolve(t){if(Array.isArray(t))return n.default.all(t.map(t=>this.resolve(t)));if("string"==typeof t){if(t in this.templates)return this.resolve(this.templates[t]);throw new Error(`Template ${t} was not registered.`)}t.extends&&delete(t=n.default(this.resolve(t.extends),t)).extends;for(const e of this.options.hookProperties)void 0===t[e]||Array.isArray(t[e])||(t[e]=[t[e]]);return t}}},function(t,e,i){"use strict";function s(){}Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t={}){this.initialize(t)}initialize(t={}){"__loop__"in this&&(t=Object.assign(this.__loop__.options,t));const e={options:t,frameId:null,frameCount:0,lastFrame:null,totalStop:0,lastStop:null,recentData:[],timeLine:null,lastModifyStats:0,skipRate:1+(t.skipFrame||0),tickLength:1e3/(t.tickRate||60),tickStorage:t.tickStorage||60,statsInterval:t.statsInterval||1/0,maxInterpolation:t.maxInterpolation||5};return e.sampleTime=e.tickLength*e.tickStorage,Object.defineProperty(this,"__loop__",{value:e}),this.onPause=t.onPause||s,this.onResume=t.onResume||s,this.onStats=t.onStats||s,this.onError=t.onError||s,this}pause(){this.__loop__.frameId&&(this.__loop__.lastStop=performance.now(),cancelAnimationFrame(this.__loop__.frameId),this.__loop__.frameId=null,this.onPause())}resume(){if(!this.__loop__.frameId){if(this.__loop__.lastStop){const t=performance.now()-this.__loop__.lastStop;this.__loop__.totalStop+=t,this.__loop__.lastFrame&&(this.__loop__.lastFrame+=t)}this.__loop__.frameId=requestAnimationFrame(t=>this._render(t)),this.onResume()}}toggle(){null!==this.__loop__.frameId?this.pause():this.resume()}getStatus(){const{recentData:t}=this.__loop__;if(!t.length)return null;let e=0,i=0,s=0;for(const n of t)e+=n.time,i+=n.ticks,s+=Number(1!==n.ticks);return{tickRate:1e3/e*i,frameRate:1e3/e*t.length,dropRate:s/t.length}}_render(t){const e=this.__loop__;let i=(t-e.totalStop-e.timeLine)/e.tickLength;(i=i<1?Math.round(i):Math.floor(i))>e.maxInterpolation?(i=e.maxInterpolation,e.timeLine=t-e.totalStop):e.timeLine+=i*e.tickLength;const s=t-(e.lastFrame||0);e.lastFrame&&(e.recentData.unshift({time:s,ticks:i}),e.recentData=e.recentData.slice(0,e.tickStorage)),e.lastFrame=t;try{for(let t=0;t<i;t+=1)this.update();i&&(e.frameCount%e.skipRate==0&&this.render(),e.frameCount+=1)}catch(t){return console.error(t),this.onError(t),void this.pause()}e.frameId=requestAnimationFrame(t=>this._render(t));const n=performance.now();if(n-e.lastModifyStats<e.statsInterval)return;e.lastModifyStats=n;const r=this.getStatus();r&&this.onStats(r)}}},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(1));e.default=class extends n.default{constructor(t={}){t.state={color:"red",radius:4,lifeCount:8,judgeRadius:2.5,bombCount:0,highSpeed:5,lowSpeed:2,...t.state},super(t),this._listeners=[],this.control=void 0===t.control?"keyboard":t.control}_mounted(){this.x=this.$context.canvas.width/2,this.y=this.$context.canvas.height/8*7,this._mountedHook.forEach(t=>t.call(this)),this.render(),this.setTask(this._mutate),"mouse"===this.control?(this._mouseState={x:0,y:0},this._listen(this.$context.canvas,"mousemove",t=>{this._mouseState.x=t.clientX/this.$context.canvas.offsetWidth*this.$context.canvas.width,this._mouseState.y=t.clientY/this.$context.canvas.offsetHeight*this.$context.canvas.height,t.preventDefault(),t.stopPropagation()})):"keyboard"===this.control&&(this._keyState={ArrowUp:0,ArrowDown:0,ArrowLeft:0,ArrowRight:0,Shift:0},this._listen(window,"keydown",t=>{t.key in this._keyState&&(this._keyState[t.key]=1,t.preventDefault(),t.stopPropagation())}),this._listen(window,"keyup",t=>{t.key in this._keyState&&(this._keyState[t.key]=0,t.preventDefault(),t.stopPropagation())}))}_listen(t,e,i,s){t.addEventListener(e,i,s),this._listeners.push([t,e,i,s])}_mutate(t){if(this._mutateHook.forEach(e=>e.call(this,t)),"mouse"===this.control)this.x=this._mouseState.x,this.y=this._mouseState.y;else if("keyboard"===this.control){const t=(this._keyState.Shift?this.lowSpeed:this.highSpeed)/Math.sqrt((this._keyState.ArrowDown^this._keyState.ArrowUp)+(this._keyState.ArrowLeft^this._keyState.ArrowRight)||1);this.x+=t*this._keyState.ArrowRight,this.x-=t*this._keyState.ArrowLeft,this.y+=t*this._keyState.ArrowDown,this.y-=t*this._keyState.ArrowUp,this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>this.$context.canvas.width&&(this.x=this.$context.canvas.width),this.y>this.$context.canvas.height&&(this.y=this.$context.canvas.height)}}render(){const t=this.getGradient("white",this.radius/2);this.fillCircle(t)}destory(){this._listeners.forEach(([t,e,i,s])=>{t.removeEventListener(e,i,s)})}}},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(15);for(var r in s)["version","default"].indexOf(r)<0&&function(t){i.d(e,t,function(){return s[t]})}(r);var o=i(0);for(var r in o)["version","default"].indexOf(r)<0&&function(t){i.d(e,t,function(){return o[t]})}(r);var a=i(14);i.d(e,"version",function(){return a.a}),s.Bullet.install(n)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=1024;e.default=function(t){let e=1,i=0,n=0;const r={},o={};function a(t){if(delete r[t],t===e)for(;!r.hasOwnProperty(++e);)continue}return(...l)=>{const u=function(t){let e=t.length-1,i=String(t[e]);for(;--e>=0;)i+=""+t[e];return i}(l.slice(0,t.length)),c=o[u],h=++n;if(r[h]=u,c)return a(c.index),c.index=h,c.value;{const n=t(...l);return o[u]={index:h,value:n},(i+=1)<=s?n:(delete o[r[e]],i-=1,a(e),n)}}}},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(9)),r=s(i(6)),o=s(i(10));e.default=class extends n.default{constructor(t,e={}){super(e),this.element=t,t.classList.add("stg-field"),t.style.background=e.background,this.canvas=t.appendChild(document.createElement("canvas")),this.canvas.height=e.height||560,this.canvas.width=e.width||480,this.title=e.title||"",this.context=this.canvas.getContext("2d"),this.setTitleStyle(e.titleStyle)}setTitleStyle(t={}){const e=t.fontSize||24;this.titleStyle={fontSize:e,fontColor:"white",x:this.canvas.width-e,y:e,textAlign:"right",textBaseline:"top",fontFamily:'Calibri, Candara, Segoe, "Segoe UI", Optima, Arial',...t}}setPlayer(t){if(t)return this.removePlayer(),this.player=new o.default(t).initialize(this.context),this.barrage&&(this.barrage.$refs.player=this.player),this}removePlayer(){this.player&&this.player.destory(),this.barrage&&delete this.barrage.$refs.player}setBarrage(t){if(t)return this.pause(),this.clearScreen(),this.barrage=new r.default(t).initialize(this.context),this.player&&(this.barrage.$refs.player=this.player),this}clearScreen(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}clear(){this.pause(),this.removePlayer(),this.clearScreen(),this.barrage=null}update(){this.barrage&&this.barrage.update(),this.player&&this.player.update()}render(){this.clearScreen(),this.barrage&&this.barrage.render(),this.player&&this.player.render(),this.showTitle()}showText(t,e){this.context.textAlign=e.textAlign,this.context.textBaseline=e.textBaseline,this.context.fillStyle=e.fontColor,this.context.font=`${e.fontSize||16}px ${e.fontFamily}`,this.context.fillText(t,e.x,e.y)}showTitle(){const t=this.title&&this.titleStyle;t&&this.showText(this.title,t)}}},function(t){t.exports={a:"0.3.0"}},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(21));e.distant=n.default;const r=s(i(22));e.timing=r.default;const o=s(i(23));e.viewport=o.default;const a=s(i(24));e.ortho=a.default;const l=s(i(25));e.square=l.default;const u=s(i(26));e.tangent=u.default;const c=s(i(27));e.flaming=c.default;const h=s(i(28));e.large=h.default;const f=s(i(29));e.medium=f.default;const d=s(i(30));e.small=d.default;const p=s(i(31));e.ellipse=p.default},function(t,e,i){"use strict";i.r(e);var s=i(11);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i(32)},function(t,e,i){"use strict";function s(){return 2*Math.floor(2*Math.random())-1}function n(...t){const e=t.length>1?t[0]:0,i=t[t.length-1];return Math.random()*(i-e)+e}function r(...t){let e=Math.random()*t.reduce((t,e)=>t+e,0);for(let i=0;i<t.length;i+=1)if((e-=t[i])<0)return i}Object.defineProperty(e,"__esModule",{value:!0}),e.pm1=s,e.real=n,e.int=function(...t){return Math.floor(n(...t))},e.choose=r,e.transfer=function(t,e,i,o,a){return t<e+o?t+n(o,a):t>i-o?t-n(o,a):t<e+a?r(t-e-o,a-o)?t+n(o,a):t-n(o,t-e-o):t>i-a?r(i-t-o,a-o)?t-n(o,a):t+n(o,i-t-o):t+n(o,a)*s()}},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(12)),r={},o=["sqrt","cbrt","exp","log","log2","log10","sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh"];Object.defineProperty(r,"twoPI",{value:2*Math.PI}),Object.defineProperty(r,"halfPI",{value:Math.PI/2}),Object.getOwnPropertyNames(Math).forEach(t=>{Object.defineProperty(r,t,{value:o.includes(t)?n.default(Math[t]):Math[t]})}),e.default=r},function(t,e,i){t.exports=function(){"use strict";var t=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var i=Object.prototype.toString.call(t);return"[object RegExp]"===i||"[object Date]"===i||function(t){return t.$$typeof===e}(t)}(t)},e="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?n((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function s(t,e,s){return t.concat(e).map(function(t){return i(t,s)})}function n(e,r,o){(o=o||{}).arrayMerge=o.arrayMerge||s,o.isMergeableObject=o.isMergeableObject||t;var a=Array.isArray(r),l=Array.isArray(e),u=a===l;return u?a?o.arrayMerge(e,r,o):function(t,e,s){var r={};return s.isMergeableObject(t)&&Object.keys(t).forEach(function(e){r[e]=i(t[e],s)}),Object.keys(e).forEach(function(o){s.isMergeableObject(e[o])&&t[o]?r[o]=n(t[o],e[o],s):r[o]=i(e[o],s)}),r}(e,r,o):i(r,o)}return n.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,i){return n(t,i,e)},{})},n}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s={images:{}};async function n(t={}){const e=[];for(const i in t)i in s.images||(s.images[i]=null,e.push(fetch(t[i]).then(t=>t.blob()).then(createImageBitmap).then(t=>s.images[i]=t).catch(()=>delete s.images[i])));return await Promise.all(e),s.images}e.loadImages=n,e.loadAssets=async function(t={}){return await Promise.all([n(t.images)]),s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{fieldSize:1e3},mutate(){this.$refs.src.dist2(this.$coord)>this.fieldSize**2&&this.destroy()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{lifeSpan:12e3},mutate(t){t>this.lifeSpan&&this.destroy()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const{x:t,y:e}=this.$coord,{width:i,height:s}=this.$context.canvas;(e<0||e>s||t<0||t>i)&&this.destroy()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;t&&this.$coord.dist2(t)<t.judgeRadius**2+this.judgeRadius**2&&this.hitPlayer()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;if(!t)return;const e=t.judgeRadius+this.judgeRadius,i=this.$coord.locate(t.x,t.y);(Math.abs(i.x)<e||Math.abs(i.y)<e)&&this.hitPlayer()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;if(!t)return;const e=t.judgeRadius+this.judgeRadius;this.$coord.dist2(t)<e**2&&this.hitPlayer()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:6,judgeRadius:4,innerR:4,color:"white",bdColor:"blue"},display(){this.fillCircle(this.getGradient(this.color,this.innerR,this.bdColor))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:20,judgeRadius:14,innerR:8.5,color:"white",bdColor:"blue"},display(){this.fillCircle(this.getGradient(this.color,this.innerR,this.bdColor))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:14,judgeRadius:8.5,innerRadius:9,color:"blue",innerColor:"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:6,judgeRadius:4,innerRadius:4,color:"blue",innerColor:"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radiusX:14,radiusY:7,judgeRadius:7,color:"blue",innerColor:"white"},display(){this.fillEllipse()}}},function(t,e,i){var s=i(33);"string"==typeof s&&(s=[[t.i,s,""]]);var n={sourceMap:!0,hmr:!0,transform:void 0,insertInto:void 0};i(35)(s,n);s.locals&&(t.exports=s.locals)},function(t,e,i){(t.exports=i(34)(!0)).push([t.i,".stg-field>canvas{height:100%;width:100%}\n","",{version:3,sources:["E:/Obstudio/stg/packages/web-stg/styles/styles/index.scss"],names:[],mappings:"AAAA,kBAEI,WAAY,CACZ,UAAW",file:"index.scss",sourcesContent:[".stg-field {\r\n  > canvas {\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n}\r\n"],sourceRoot:""}])},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var n=(o=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=s.sources.map(function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"});return[i].concat(r).concat([n]).join("\n")}var o;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},n=0;n<this.length;n++){var r=this[n][0];null!=r&&(s[r]=!0)}for(n=0;n<t.length;n++){var o=t[n];null!=o[0]&&s[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){var s,n,r={},o=(s=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=s.apply(this,arguments)),n}),a=function(t){var e={};return function(t,i){if("function"==typeof t)return t();if(void 0===e[t]){var s=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,i);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}}(),l=null,u=0,c=[],h=i(36);function f(t,e){for(var i=0;i<t.length;i++){var s=t[i],n=r[s.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](s.parts[o]);for(;o<s.parts.length;o++)n.parts.push(g(s.parts[o],e))}else{var a=[];for(o=0;o<s.parts.length;o++)a.push(g(s.parts[o],e));r[s.id]={id:s.id,refs:1,parts:a}}}}function d(t,e){for(var i=[],s={},n=0;n<t.length;n++){var r=t[n],o=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};s[o]?s[o].parts.push(a):i.push(s[o]={id:o,parts:[a]})}return i}function p(t,e){var i=a(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var s=c[c.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),c.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=a(t.insertAt.before,i);i.insertBefore(e,n)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var s=function(){0;return i.nc}();s&&(t.attrs.nonce=s)}return m(e,t.attrs),p(t,e),e}function m(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function g(t,e){var i,s,n,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var o=u++;i=l||(l=y(e)),s=x.bind(null,i,o,!1),n=x.bind(null,i,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),p(t,e),e}(e),s=function(t,e,i){var s=i.css,n=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||r)&&(s=h(s));n&&(s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([s],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,i,e),n=function(){_(i),i.href&&URL.revokeObjectURL(i.href)}):(i=y(e),s=function(t,e){var i=e.css,s=e.media;s&&t.setAttribute("media",s);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),n=function(){_(i)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=d(t,e);return f(i,e),function(t){for(var s=[],n=0;n<i.length;n++){var o=i[n];(a=r[o.id]).refs--,s.push(a)}t&&f(d(t,e),e);for(n=0;n<s.length;n++){var a;if(0===(a=s[n]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var v,b=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function x(t,e,i,s){var n=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=b(e,n);else{var r=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,s=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:s+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}}])});
//# sourceMappingURL=stg.runtime.js.map