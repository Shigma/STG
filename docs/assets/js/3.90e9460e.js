(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{29:function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_vnode__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(48),web_stg_dist_stg_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49),web_stg_dist_stg_common__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(web_stg_dist_stg_common__WEBPACK_IMPORTED_MODULE_1__),web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50),web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_2__),_dist_icons_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(51),_dist_icons_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_dist_icons_css__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__.a={props:{width:{type:Number,default:480},height:{type:Number,default:560},autoRun:Boolean},data:()=>({layoutWidth:null,tabMovingToRight:0,tabIndex:null,fileIndex:0,active:!1,tickRate:null,frameRate:null,dropRate:null}),computed:{aspectRatio(){return 2*this.width/this.height},layoutStyle(){return this.layoutWidth?{width:this.layoutWidth+"px",height:this.layoutWidth/this.aspectRatio+"px"}:{}}},watch:{fileIndex:"setBarrage",async tabIndex(t,e){null!==this.oldValue&&(this.tabMovingToRight=t>e),1===this.tabIndex&&(await this.$nextTick(),[].forEach.call(this.$refs.code.childNodes,(t,e)=>{this.fileIndex===e?t.classList.remove("inactive"):t.classList.add("inactive")}))}},created(){this.tabIndex=1,this.multiFile=this.$slots.default.length>1,this.files=this.$slots.default.map(vnode=>{const code=Object(_utils_vnode__WEBPACK_IMPORTED_MODULE_0__.a)(vnode),exports={},module={code:code,exports:exports},require=()=>web_stg_dist_stg_common__WEBPACK_IMPORTED_MODULE_1__;try{const args="(exports,module,require)";eval(`(${args}=>{${code}})${args}`)}catch(t){console.error(t),console.warn("An error encounted in: \n"+code)}return module})},async mounted(){this.layout(),addEventListener("resize",()=>this.layout()),this.field=new web_stg_dist_stg_common__WEBPACK_IMPORTED_MODULE_1__.Field(this.$refs.field,{width:this.width,height:this.height,statsInterval:50,onPause:()=>this.active=!1,onResume:()=>this.active=!0,onStats:t=>{this.tickRate=t.tickRate.toFixed(1),this.frameRate=t.frameRate.toFixed(1),this.dropRate=Math.floor(100*t.dropRate)+"%"}}),this.autoRun||this.field.setPlayer({}),this.setBarrage()},methods:{async layout(){await this.$nextTick();const t=this.$el.parentElement?this.$el.parentElement.offsetWidth:1/0;this.layoutWidth=Math.min(t,(innerHeight-100)*this.aspectRatio)},setBarrage(){this.field&&(this.field.setBarrage(this.files[this.fileIndex].exports),this.autoRun&&this.field.toggle())},toggle(){this.field&&this.field.toggle()}}}},30:function(t,e,s){},48:function(t,e,s){"use strict";function i(t){return void 0===t.tag&&void 0!==t.text?t.text:t.children.map(i).join("")}s.d(e,"a",function(){return i})},49:function(t,e){t.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=16)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={angleUnit:Math.PI}},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(17));e.random=n;const r=o(s(12));e.memorize=r.default;const a=o(s(18));e.math=a.default},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=s(1),n=i(s(0)),r=i(s(4)),a=i(s(5));e.default=class extends a.default{constructor(t={}){super(),this._point={x:0,y:0,face:0},this.show=!1!==t.show,this._displayHook=t.display,this._initHooks("_mountedHook",t.mounted),this._initHooks("_mutateHook",t.mutate),Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e)}get x(){return this._point.x}get y(){return this._point.y}get face(){return this._point.face}set x(t){this._point.x=t,this._coordinate=null}set y(t){this._point.y=t,this._coordinate=null}set face(t){this._point.face=t,this._coordinate=null}_initHooks(t,e){Array.isArray(e)?this[t]=e:this[t]=e?[e]:[]}_mounted(){this._mountedHook.forEach(t=>t.call(this)),this._mutateHook.forEach(t=>this.setTask(t))}render(){this._displayHook&&this.$context&&!1!==this.show&&this._displayHook.call(this)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new r.default(this.x,this.y,this.face),this._coordinate.$birth=this.$tick),this._coordinate}movePolar(t=this.rho,e=this.theta){this.x+=t*o.math.cos(n.default.angleUnit*e),this.y+=t*o.math.sin(n.default.angleUnit*e)}emitBullets(...t){this.$parent.$refs.src=this,this.$parent.emitBullets(...t),delete this.$parent.$refs.src}fillCircle(t=this.color,e=this.radius){const{x:s,y:i}=this.$coord;this.$context.beginPath(),this.$context.arc(s,i,e,0,o.math.twoPI),this.$context.closePath(),this.$context.fillStyle=t.output?t.output():t,this.$context.fill()}fillEllipse(t=this.color,e=this.innerColor,s=this.radiusX,i=this.radiusY,r=this.face){const{x:a,y:l}=this.$coord;this.$context.beginPath(),this.$context.strokeStyle=t,this.$context.lineWidth=2,this.$context.ellipse(a,l,s,i,r*n.default.angleUnit,0,o.math.twoPI),this.$context.closePath(),this.$context.stroke(),this.$context.fillStyle=e.output?e.output():e,this.$context.fill()}getGradient(t,e,s=this.color,i=this.radius){const{x:o,y:n}=this.$coord,r=this.$context.createRadialGradient(o,n,e,o,n,i);return r.addColorStop(0,t.output?t.output():t),r.addColorStop(1,s.output?s.output():s),r}bezierCurve(...t){if(t.length%6==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=6){const s=this.$coord.resolve(t[e],t[e+1]),i=this.$coord.resolve(t[e+2],t[e+3]),o=this.$coord.resolve(t[e+4],t[e+5]);this.$context.bezierCurveTo(s.x,s.y,i.x,i.y,o.x,o.y)}}quadraticCurve(...t){if(t.length%4==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=4){const s=this.$coord.resolve(t[e],t[e+1]),i=this.$coord.resolve(t[e+2],t[e+3]);this.$context.quadraticCurveTo(s.x,s.y,i.x,i.y)}}toJSON(){const t={};for(const e in this)("string"==typeof e&&"$"!==e[0]&&"_"!==e[0]||"$tick"===e)&&(t[e]=this[e]);return t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={images:{}};async function o(t={}){const e=[];for(const s in t)s in i.images||(i.images[s]=fetch(t[s]).then(t=>t.blob()).then(createImageBitmap).then(t=>i.images[s]=t).catch(()=>delete i.images[s])),e.push(i.images[s]);return await Promise.all(e),i.images}e.default=i,e.loadImages=o,e.loadAssets=async function(t={}){return await Promise.all([o(t.images)]),i}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=s(1),n=i(s(0));class r{constructor(t,e,s){this.x=t,this.y=e,this.face=s}get face(){return this._face}set face(t){this._face=t||0,this._cos=o.math.cos(n.default.angleUnit*t||0),this._sin=o.math.sin(n.default.angleUnit*t||0)}get rho(){return this._rho?this._rho:this._rho=o.math.sqrt(this.x**2+this.y**2)}get theta(){return this._thetaRadian/n.default.angleUnit}get thetaRadian(){return"number"==typeof this._thetaRadian?this._thetaRadian:this._thetaRadian=o.math.atan2(this.y,this.x)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}resolve(...t){let e,s,i;return"object"==typeof t[0]?(e=t[0].x,s=t[0].y,i=t[0].face):[e,s,i=0]=t,new r(this.x+e*this._cos-s*this._sin,this.y+e*this._sin+s*this._cos,this.face+i)}locate(...t){let e,s,i;"object"==typeof t[0]?(e=t[0].x,s=t[0].y,i=t[0].face):[e,s,i=0]=t;const o=e-this.x,n=s-this.y;return new r(o*this._cos+n*this._sin,n*this._cos-o*this._sin,i-this.face)}}e.default=r},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(3)),n=i(s(0));class r{constructor(){this.$assets=o.default,this.$config=n.default,this.$tick=0,Object.defineProperty(this,"__updater__",{value:{tasks:[],currentTask:null,tasksToRemove:new Set,taskIndex:0}})}initialize(t,e){return this.$context=t,this.$parent=e,this._mounted&&this._mounted(),this}update(){this.$tick+=1;const t=this.__updater__;t.tasks=t.tasks.filter(e=>!t.tasksToRemove.has(e.id));const e=t.tasks;if(t.tasksToRemove.clear(),e.forEach(e=>{t.currentTask=e.id,e.callback.call(this,this.$tick),e.preserve||t.tasksToRemove.add(e.id)}),t.tasks.length>r.scheduleLimit)throw new Error(`The amount of scheduled tasks (${t.tasks.length}) is beyond the limit!`)}setTask(t,e=1/0,s=!0){const i=++this.__updater__.taskIndex;return this.__updater__.tasks.splice(e,0,{callback:t,preserve:s,id:i}),i}setTimeout(t,e){return t+=this.$tick,this.setTask(()=>{this.$tick<=t||(e.call(this,this.$tick),this.removeTask())},0)}setInterval(t,...e){if(t<=0)throw new Error(`The interval ${t} should be positive.`);const s=e.length>1?e[0]:1/0,i=e.length>2?e[1]:0,o=e[e.length-1],n=this.$tick+i;return this.setTask(e=>{e-=n;const i=Math.floor(e/t),r=i*t-e;if(i>0&&r>=0&&r<t&&(o.call(this,this.$tick),i>=s))return this.removeTask()},0)}removeTask(t=this.__updater__.currentTask){t&&this.__updater__.tasksToRemove.add(t)}}r.scheduleLimit=256,e.default=r},function(t,e,s){"use strict";function i(t){for(var s in t)e.hasOwnProperty(s)||(e[s]=t[s])}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=o(s(3));e.assets=n.default;const r=o(s(0));e.config=r.default;const a=o(s(7));e.Barrage=a.default;const l=o(s(8));e.Bullet=l.default;const h=o(s(4));e.Coordinate=h.default;const u=o(s(13));e.Field=u.default;const c=o(s(10));e.Looping=c.default;const d=o(s(11));e.Player=d.default;const _=o(s(2));e.CanvasPoint=_.default;const f=o(s(9));e.Templater=f.default;const p=o(s(5));e.Updater=p.default,i(s(3)),i(s(7)),i(s(8)),i(s(4)),i(s(13)),i(s(10)),i(s(11)),i(s(2)),i(s(9)),i(s(5))},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(8)),n=i(s(2)),r=i(s(5));class a extends r.default{constructor(t={}){super(),this._pointCounter=0,this.$refs={},this.$bullets=[],this._mutateHook=t.mutate,this._mountedHook=t.mounted,this._references=t.reference||{},Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e)}_mounted(){this.$refs={},this._mountedHook&&this._mountedHook(),this._mutateHook&&this.setTask(this._mutateHook);for(const t of Object.keys(this._references))this.setRefPoint(t,this._references[t]);this.setTask(()=>{for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.update()}if(this.$bullets.forEach(t=>t.update()),this.$bullets.length>a.maxBulletCount)throw new Error(`The amount of bullets ${this.$bullets.length} is beyond the limit!`)})}render(){for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.render()}this.$bullets.forEach(t=>t.render())}setRefPoint(...t){const e=t[t.length-1],s=t.length>1?t[0]:++this._pointCounter;return this.$refs[s]=new n.default(e).initialize(this.$context,this),s}removeRefPoint(t){return delete this.$refs[t]}emitBullets(...t){const e=t.length>2?t[0]:0,s=t.length>1?t.length>2?t[1]:t[0]:1,i=t.length>3?t[2]:1,n=t[t.length-1];for(let t=e;t<s;t+=i){const e="function"==typeof n?n.call(this,t):n,s=new o.default(e);s.$id=++this._pointCounter;for(const t in this.$refs)s.$refs[t]=this.$refs[t].$coord;s.initialize(this.$context,this);const i=this.$bullets.findIndex(({layer:t})=>t>s.layer);i<0?this.$bullets.push(s):this.$bullets.splice(i,0,s)}}}a.maxBulletCount=4096,e.default=a},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=s(1),n=i(s(0)),r=i(s(9)),a=i(s(4)),l=i(s(2));class h extends l.default{constructor(t={}){const e=h.templates.resolve(t);void 0===e.judgeType?e.judgeType="ortho":"none"===e.judgeType&&(e.judgeType=null),void 0===e.fieldType?e.fieldType="viewport":"infinite"===e.fieldType&&(e.fieldType=null),e.extends=[e.fieldType,e.judgeType],super(h.templates.resolve(e)),this.$refs={},this.layer=void 0===e.layer?0:e.layer;const s=void 0===e.origin?"origin":e.origin;this._mountedHook.unshift(()=>{this.$origin="string"==typeof s?this.$refs[s]||{x:0,y:0,face:0}:s})}static install(...t){this.templates.install(...t)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new a.default(this.x+this.$origin.x,this.y+this.$origin.y,this.face+this.$origin.face),this._coordinate.$birth=this.$tick),this._coordinate}polarLocate(t=this.rho,e=this.theta){e+=this.$origin.face,this.x=t*o.math.cos(n.default.angleUnit*e),this.y=t*o.math.sin(n.default.angleUnit*e)}hitPlayer(){this.$parent.$refs.player.lifeCount-=1,this.destroy()}destroy(){const t=this.$id;this.$parent.setTimeout(0,function(){const e=this.$bullets.findIndex(e=>e.$id===t);e>=0&&this.$bullets.splice(e,1)})}}h.templates=new r.default({hookProperties:["mutate","mounted"]}),e.default=h},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(19));e.default=class{constructor(t={}){this.templates={},this.options={},Object.assign(this.options,t)}install(...t){"string"==typeof t[0]?this.templates[t[0]]=t[1]:"object"==typeof t[0]&&Object.assign(this.templates,t[0])}resolve(t){if(Array.isArray(t))return o.default.all(t.map(t=>this.resolve(t)));if("string"==typeof t){if(t in this.templates)return this.resolve(this.templates[t]);throw new Error(`Template ${t} was not registered.`)}t.extends&&delete(t=o.default(this.resolve(t.extends),t)).extends;for(const e of this.options.hookProperties)void 0===t[e]||Array.isArray(t[e])||(t[e]=[t[e]]);return t}}},function(t,e,s){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t={}){this.initialize(t)}initialize(t={}){"__loop__"in this&&(t=Object.assign(this.__loop__.options,t));const e={options:t,frameId:null,frameCount:0,lastFrame:null,totalStop:0,lastStop:null,recentData:[],timeLine:null,lastModifyStats:0,skipRate:1+(t.skipFrame||0),tickLength:1e3/(t.tickRate||60),tickStorage:t.tickStorage||60,statsInterval:t.statsInterval||1/0,maxInterpolation:t.maxInterpolation||5};return e.sampleTime=e.tickLength*e.tickStorage,Object.defineProperty(this,"__loop__",{value:e}),this.onPause=t.onPause||i,this.onResume=t.onResume||i,this.onStats=t.onStats||i,this.onError=t.onError||i,this}pause(){this.__loop__.frameId&&(this.__loop__.lastStop=performance.now(),cancelAnimationFrame(this.__loop__.frameId),this.__loop__.frameId=null,this.onPause())}resume(){if(!this.__loop__.frameId){if(this.__loop__.lastStop){const t=performance.now()-this.__loop__.lastStop;this.__loop__.totalStop+=t,this.__loop__.lastFrame&&(this.__loop__.lastFrame+=t)}this.__loop__.frameId=requestAnimationFrame(t=>this._render(t)),this.onResume()}}toggle(){null!==this.__loop__.frameId?this.pause():this.resume()}getStatus(){const{recentData:t}=this.__loop__;if(!t.length)return null;let e=0,s=0,i=0;for(const o of t)e+=o.time,s+=o.ticks,i+=Number(1!==o.ticks);return{tickRate:1e3/e*s,frameRate:1e3/e*t.length,dropRate:i/t.length}}_render(t){const e=this.__loop__;let s=(t-e.totalStop-e.timeLine)/e.tickLength;(s=s<1?Math.round(s):Math.floor(s))>e.maxInterpolation?(s=e.maxInterpolation,e.timeLine=t-e.totalStop):e.timeLine+=s*e.tickLength;const i=t-(e.lastFrame||0);e.lastFrame&&(e.recentData.unshift({time:i,ticks:s}),e.recentData=e.recentData.slice(0,e.tickStorage)),e.lastFrame=t;try{for(let t=0;t<s;t+=1)this.update();s&&(e.frameCount%e.skipRate==0&&this.render(),e.frameCount+=1)}catch(t){return console.error(t),this.onError(t),void this.pause()}e.frameId=requestAnimationFrame(t=>this._render(t));const o=performance.now();if(o-e.lastModifyStats<e.statsInterval)return;e.lastModifyStats=o;const n=this.getStatus();n&&this.onStats(n)}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(2));e.default=class extends o.default{constructor(t={}){t.state={color:"red",radius:4,lifeCount:8,judgeRadius:2.5,bombCount:0,highSpeed:5,lowSpeed:2,...t.state},super(t),this._listeners=[],this.control=void 0===t.control?"keyboard":t.control}_mounted(){this.x=this.$context.canvas.width/2,this.y=this.$context.canvas.height/8*7,this._mountedHook.forEach(t=>t.call(this)),this.render(),this.setTask(this._mutate),"mouse"===this.control?(this._mouseState={x:0,y:0},this._listen(this.$context.canvas,"mousemove",t=>{this._mouseState.x=t.clientX/this.$context.canvas.offsetWidth*this.$context.canvas.width,this._mouseState.y=t.clientY/this.$context.canvas.offsetHeight*this.$context.canvas.height,t.preventDefault(),t.stopPropagation()})):"keyboard"===this.control&&(this._keyState={ArrowUp:0,ArrowDown:0,ArrowLeft:0,ArrowRight:0,Shift:0},this._listen(window,"keydown",t=>{t.key in this._keyState&&(this._keyState[t.key]=1,t.preventDefault(),t.stopPropagation())}),this._listen(window,"keyup",t=>{t.key in this._keyState&&(this._keyState[t.key]=0,t.preventDefault(),t.stopPropagation())}))}_listen(t,e,s,i){t.addEventListener(e,s,i),this._listeners.push([t,e,s,i])}_mutate(t){if(this._mutateHook.forEach(e=>e.call(this,t)),"mouse"===this.control)this.x=this._mouseState.x,this.y=this._mouseState.y;else if("keyboard"===this.control){const t=(this._keyState.Shift?this.lowSpeed:this.highSpeed)/Math.sqrt((this._keyState.ArrowDown^this._keyState.ArrowUp)+(this._keyState.ArrowLeft^this._keyState.ArrowRight)||1);this.x+=t*this._keyState.ArrowRight,this.x-=t*this._keyState.ArrowLeft,this.y+=t*this._keyState.ArrowDown,this.y-=t*this._keyState.ArrowUp,this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>this.$context.canvas.width&&(this.x=this.$context.canvas.width),this.y>this.$context.canvas.height&&(this.y=this.$context.canvas.height)}}render(){const t=this.getGradient("white",this.radius/2);this.fillCircle(t)}destory(){this._listeners.forEach(([t,e,s,i])=>{t.removeEventListener(e,s,i)})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){let e=1,s=0,i=0;const o={},n={};function r(t){if(delete o[t],t===e)for(;!o.hasOwnProperty(++e);)continue}return(...a)=>{const l=function(t){let e=t.length-1,s=String(t[e]);for(;--e>=0;)s+=""+t[e];return s}(a.slice(0,t.length)),h=n[l],u=++i;if(o[u]=l,h)return r(h.index),h.index=u,h.value;{const i=t(...a);return n[l]={index:u,value:i},(s+=1)<=1024?i:(delete n[o[e]],s-=1,r(e),i)}}}},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(3)),r=o(s(10)),a=o(s(7)),l=o(s(11));e.default=class extends r.default{constructor(t,e={}){super(e),this.element=t,this.$assets=n.default,t.classList.add("stg-field"),t.style.background=e.background,this.canvas=t.appendChild(document.createElement("canvas")),this.canvas.height=e.height||560,this.canvas.width=e.width||480,this.title=e.title||"",this.context=this.canvas.getContext("2d"),this.setTitleStyle(e.titleStyle)}setTitleStyle(t={}){const e=t.fontSize||24;this.titleStyle={fontSize:e,fontColor:"white",x:this.canvas.width-e,y:e,textAlign:"right",textBaseline:"top",fontFamily:'Calibri, Candara, Segoe, "Segoe UI", Optima, Arial',...t}}async setPlayer(t){t&&(this.removePlayer(),await n.loadAssets(t.assets),this.player=new l.default(t).initialize(this.context),this.barrage&&(this.barrage.$refs.player=this.player))}removePlayer(){this.player&&this.player.destory(),this.barrage&&delete this.barrage.$refs.player}async setBarrage(t){t&&(this.pause(),this.clearScreen(),await n.loadAssets(t.assets),this.barrage=new a.default(t).initialize(this.context),this.player&&(this.barrage.$refs.player=this.player))}clearScreen(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}clear(){this.pause(),this.removePlayer(),this.clearScreen(),this.barrage=null}update(){this.barrage&&this.barrage.update(),this.player&&this.player.update()}render(){this.clearScreen(),this.barrage&&this.barrage.render(),this.player&&this.player.render(),this.showTitle()}showText(t,e){this.context.textAlign=e.textAlign,this.context.textBaseline=e.textBaseline,this.context.fillStyle=e.fontColor,this.context.font=`${e.fontSize||16}px ${e.fontFamily}`,this.context.fillText(t,e.x,e.y)}showTitle(){const t=this.title&&this.titleStyle;t&&this.showText(this.title,t)}loadAssets(t){return n.loadAssets(t)}loadImages(t){return n.loadImages(t)}}},function(t){t.exports={a:"0.3.0"}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(20));e.distant=o.default;const n=i(s(21));e.timing=n.default;const r=i(s(22));e.viewport=r.default;const a=i(s(23));e.ortho=a.default;const l=i(s(24));e.square=l.default;const h=i(s(25));e.tangent=h.default;const u=i(s(26));e.flaming=u.default;const c=i(s(27));e.large=c.default;const d=i(s(28));e.medium=d.default;const _=i(s(29));e.small=_.default;const f=i(s(30));e.ellipse=f.default},function(t,e,s){"use strict";s.r(e);var i=s(6),o=s(15);for(var n in i)["version","default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return i[t]})}(n);var r=s(1);for(var n in r)["version","default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return r[t]})}(n);var a=s(14);s.d(e,"version",function(){return a.a}),i.Bullet.install(o)},function(t,e,s){"use strict";function i(){return 2*Math.floor(2*Math.random())-1}function o(...t){const e=t.length>1?t[0]:0,s=t[t.length-1];return Math.random()*(s-e)+e}function n(...t){let e=Math.random()*t.reduce((t,e)=>t+e,0);for(let s=0;s<t.length;s+=1)if((e-=t[s])<0)return s}Object.defineProperty(e,"__esModule",{value:!0}),e.pm1=i,e.real=o,e.int=function(...t){return Math.floor(o(...t))},e.choose=n,e.transfer=function(t,e,s,r,a){return t<e+r?t+o(r,a):t>s-r?t-o(r,a):t<e+a?n(t-e-r,a-r)?t+o(r,a):t-o(r,t-e-r):t>s-a?n(s-t-r,a-r)?t-o(r,a):t+o(r,s-t-r):t+o(r,a)*i()}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(12)),n={},r=["sqrt","cbrt","exp","log","log2","log10","sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh"];Object.defineProperty(n,"twoPI",{value:2*Math.PI}),Object.defineProperty(n,"halfPI",{value:Math.PI/2}),Object.getOwnPropertyNames(Math).forEach(t=>{Object.defineProperty(n,t,{value:r.includes(t)?o.default(Math[t]):Math[t]})}),e.default=n},function(t,e,s){t.exports=function(){"use strict";var t=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var s=Object.prototype.toString.call(t);return"[object RegExp]"===s||"[object Date]"===s||function(t){return t.$$typeof===e}(t)}(t)},e="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?o((s=t,Array.isArray(s)?[]:{}),t,e):t;var s}function i(t,e,i){return t.concat(e).map(function(t){return s(t,i)})}function o(e,n,r){(r=r||{}).arrayMerge=r.arrayMerge||i,r.isMergeableObject=r.isMergeableObject||t;var a=Array.isArray(n);return a===Array.isArray(e)?a?r.arrayMerge(e,n,r):function(t,e,i){var n={};return i.isMergeableObject(t)&&Object.keys(t).forEach(function(e){n[e]=s(t[e],i)}),Object.keys(e).forEach(function(r){i.isMergeableObject(e[r])&&t[r]?n[r]=o(t[r],e[r],i):n[r]=s(e[r],i)}),n}(e,n,r):s(n,r)}return o.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,s){return o(t,s,e)},{})},o}()},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{fieldSize:1e3},mutate(){this.$refs.src.dist2(this.$coord)>this.fieldSize**2&&this.destroy()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{lifeSpan:12e3},mutate(t){t>this.lifeSpan&&this.destroy()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const{x:t,y:e}=this.$coord,{width:s,height:i}=this.$context.canvas;(e<0||e>i||t<0||t>s)&&this.destroy()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;t&&this.$coord.dist2(t)<t.judgeRadius**2+this.judgeRadius**2&&this.hitPlayer()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;if(!t)return;const e=t.judgeRadius+this.judgeRadius,s=this.$coord.locate(t.x,t.y);(Math.abs(s.x)<e||Math.abs(s.y)<e)&&this.hitPlayer()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mutate(){const t=this.$parent.$refs.player;if(!t)return;const e=t.judgeRadius+this.judgeRadius;this.$coord.dist2(t)<e**2&&this.hitPlayer()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:6,judgeRadius:4,innerR:4,color:"white",bdColor:"blue"},display(){this.fillCircle(this.getGradient(this.color,this.innerR,this.bdColor))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:20,judgeRadius:14,innerR:8.5,color:"white",bdColor:"blue"},display(){this.fillCircle(this.getGradient(this.color,this.innerR,this.bdColor))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:14,judgeRadius:8.5,innerRadius:9,color:"blue",innerColor:"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radius:6,judgeRadius:4,innerRadius:4,color:"blue",innerColor:"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={state:{radiusX:14,radiusY:7,judgeRadius:7,color:"blue",innerColor:"white"},display(){this.fillEllipse()}}}])},50:function(t,e,s){},51:function(t,e,s){},52:function(t,e,s){"use strict";var i=s(30);s.n(i).a},55:function(t,e,s){"use strict";s.r(e);var i=s(29).a,o=(s(52),s(1)),n=Object(o.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stg-demo",class:{"multi-file":t.multiFile},style:t.layoutStyle},[s("div",{staticClass:"left"},[t.multiFile?s("div",{staticClass:"toolbar"},[s("div",{class:["tab",{active:0===t.tabIndex}],on:{click:function(e){e.stopPropagation(),t.tabIndex=0}}},[s("i",{staticClass:"icon-folder"}),t._v("浏览\n      ")]),t._v(" "),s("div",{class:["tab",{active:1===t.tabIndex}],on:{click:function(e){e.stopPropagation(),t.tabIndex=1}}},[s("i",{staticClass:"icon-source"}),t._v("代码\n      ")]),t._v(" "),s("div",{class:["tab",{active:2===t.tabIndex}],on:{click:function(e){e.stopPropagation(),t.tabIndex=2}}},[s("i",{staticClass:"icon-settings"}),t._v("设置\n      ")]),t._v(" "),s("span",{staticClass:"underline",style:{left:(2*t.tabIndex+1)/6*100+"%"}})]):t._e(),t._v(" "),s("div",{staticClass:"container"},[s("transition",{attrs:{name:"container","leave-to-class":"transform-to-"+(t.tabMovingToRight?"left":"right"),"enter-class":"transform-to-"+(t.tabMovingToRight?"right":"left")}},[0===t.tabIndex?s("div",{key:"0",staticClass:"explorer"},t._l(t.files,function(e,i){return s("div",{key:i,class:["item",{active:t.fileIndex===i}],domProps:{textContent:t._s(e.exports.title)},on:{click:function(e){e.stopPropagation(),t.fileIndex=i}}})}),0):1===t.tabIndex?s("div",{key:"1",ref:"code",staticClass:"code"},[t._t("default")],2):s("div",{key:"2",staticClass:"settings"},[s("h3",[t._v("数据统计")]),t._v(" "),s("div",[t._v("逻辑帧率: "+t._s(t.tickRate||"--"))]),t._v(" "),s("div",[t._v("物理帧率: "+t._s(t.frameRate||"--"))]),t._v(" "),s("div",[t._v("处理落率: "+t._s(t.dropRate||"--"))])])])],1)]),t._v(" "),s("div",{ref:"field",staticClass:"right",on:{click:t.toggle}})])},[],!1,null,null,null);e.default=n.exports}}]);